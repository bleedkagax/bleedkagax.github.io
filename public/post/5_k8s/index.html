<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Kubernetes | Kaga Blog</title>
<meta name=keywords content="SystemDesign"><meta name=description content="Introduction
Kubernetes (k8s) is an open-source container orchestration platform that automates the deployment, scaling, and management of containerized applications.
Kubernetes Architecture
Masters
The master node manages the Kubernetes cluster. It coordinates all activities, such as scheduling, scaling, and updating applications.

Components:

API Server: The front-end of the Kubernetes control plane.
etcd: A distributed key-value store for configuration data.
Controller Manager: Manages controllers that handle routine tasks.
Scheduler: Assigns workloads to nodes based on resource availability and policies.



Nodes
Worker nodes run the containerized applications. Each node contains the necessary services to run Pods and communicate with the master node."><meta name=author content><link rel=canonical href=https://bleedkagax.github.io/post/5_k8s/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://bleedkagax.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://bleedkagax.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://bleedkagax.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://bleedkagax.github.io/apple-touch-icon.png><link rel=mask-icon href=https://bleedkagax.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://bleedkagax.github.io/post/5_k8s/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Kubernetes"><meta property="og:description" content="Introduction
Kubernetes (k8s) is an open-source container orchestration platform that automates the deployment, scaling, and management of containerized applications.
Kubernetes Architecture
Masters
The master node manages the Kubernetes cluster. It coordinates all activities, such as scheduling, scaling, and updating applications.

Components:

API Server: The front-end of the Kubernetes control plane.
etcd: A distributed key-value store for configuration data.
Controller Manager: Manages controllers that handle routine tasks.
Scheduler: Assigns workloads to nodes based on resource availability and policies.



Nodes
Worker nodes run the containerized applications. Each node contains the necessary services to run Pods and communicate with the master node."><meta property="og:type" content="article"><meta property="og:url" content="https://bleedkagax.github.io/post/5_k8s/"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-10-15T00:00:00+00:00"><meta property="article:modified_time" content="2024-10-15T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Kubernetes"><meta name=twitter:description content="Introduction
Kubernetes (k8s) is an open-source container orchestration platform that automates the deployment, scaling, and management of containerized applications.
Kubernetes Architecture
Masters
The master node manages the Kubernetes cluster. It coordinates all activities, such as scheduling, scaling, and updating applications.

Components:

API Server: The front-end of the Kubernetes control plane.
etcd: A distributed key-value store for configuration data.
Controller Manager: Manages controllers that handle routine tasks.
Scheduler: Assigns workloads to nodes based on resource availability and policies.



Nodes
Worker nodes run the containerized applications. Each node contains the necessary services to run Pods and communicate with the master node."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://bleedkagax.github.io/post/"},{"@type":"ListItem","position":2,"name":"Kubernetes","item":"https://bleedkagax.github.io/post/5_k8s/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Kubernetes","name":"Kubernetes","description":"Introduction Kubernetes (k8s) is an open-source container orchestration platform that automates the deployment, scaling, and management of containerized applications.\nKubernetes Architecture Masters The master node manages the Kubernetes cluster. It coordinates all activities, such as scheduling, scaling, and updating applications.\nComponents: API Server: The front-end of the Kubernetes control plane. etcd: A distributed key-value store for configuration data. Controller Manager: Manages controllers that handle routine tasks. Scheduler: Assigns workloads to nodes based on resource availability and policies. Nodes Worker nodes run the containerized applications. Each node contains the necessary services to run Pods and communicate with the master node.\n","keywords":["SystemDesign"],"articleBody":"Introduction Kubernetes (k8s) is an open-source container orchestration platform that automates the deployment, scaling, and management of containerized applications.\nKubernetes Architecture Masters The master node manages the Kubernetes cluster. It coordinates all activities, such as scheduling, scaling, and updating applications.\nComponents: API Server: The front-end of the Kubernetes control plane. etcd: A distributed key-value store for configuration data. Controller Manager: Manages controllers that handle routine tasks. Scheduler: Assigns workloads to nodes based on resource availability and policies. Nodes Worker nodes run the containerized applications. Each node contains the necessary services to run Pods and communicate with the master node.\nComponents: kubelet: Ensures containers are running in a Pod. kube-proxy: Manages network routing for Kubernetes services. Container Runtime: Software responsible for running containers (e.g., Docker, containerd). Components Understanding the architecture is crucial for effective cluster management and troubleshooting.\nSetup and Installation Prerequisites Operating System: Linux distributions are commonly used. Hardware Requirements: Adequate CPU, memory, and storage. Networking: Proper network configuration for node communication. Installation Methods Minikube Ideal for local development and testing.\n# Install Minikube curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 sudo install minikube-linux-amd64 /usr/local/bin/minikube # Start Minikube minikube start kubeadm Suitable for setting up production-grade clusters.\n# Initialize Master Node sudo kubeadm init --pod-network-cidr=10.244.0.0/16 # Set up Kubernetes configuration mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config # Install a Pod network (e.g., Flannel) kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml Managed Kubernetes Services Managed services simplify cluster setup and management.\nOptions: Google Kubernetes Engine (GKE) Amazon Elastic Kubernetes Service (EKS) Azure Kubernetes Service (AKS) Alibaba Cloud Container Service Core Concepts Pods The smallest deployable units in Kubernetes, representing a single instance of a running process.\nFeatures: Can contain one or more containers. Share storage, network, and specifications. Services Define a logical set of Pods and a policy to access them.\nTypes: ClusterIP: Internal access within the cluster. NodePort: Exposes the service on each nodeâ€™s IP at a static port. LoadBalancer: Exposes the service externally using a cloud providerâ€™s load balancer. ExternalName: Maps a service to a DNS name. Deployments Provide declarative updates for Pods and ReplicaSets.\nFeatures: Manage rolling updates and rollbacks. Ensure desired state is maintained. ReplicaSets Ensure a specified number of Pod replicas are running at any given time.\nNamespaces Provide a way to divide cluster resources between multiple users.\nUse Cases: Environment segregation (e.g., dev, staging, production). Resource isolation. ConfigMaps and Secrets ConfigMaps: Store non-confidential configuration data. Secrets: Store sensitive information such as passwords and tokens. Best Practices Resource Management Resource Requests and Limits Define resource requirements to optimize scheduling and prevent resource contention.\nresources: requests: memory: \"64Mi\" cpu: \"250m\" limits: memory: \"128Mi\" cpu: \"500m\" Auto-scaling Utilize Kubernetesâ€™ auto-scaling features to handle varying workloads.\nHorizontal Pod Autoscaler (HPA)\napiVersion: autoscaling/v1 kind: HorizontalPodAutoscaler metadata: name: hpa-example spec: scaleTargetRef: apiVersion: apps/v1 kind: Deployment name: myapp minReplicas: 2 maxReplicas: 10 targetCPUUtilizationPercentage: 80 Vertical Pod Autoscaler (VPA)\nCluster Autoscaler\nNaming Conventions Maintain consistent and descriptive names for resources.\nFormat: --- Example: webapp-api-prod-1 Configuration Management Store configurations separately using ConfigMaps and Secrets to maintain flexibility and security.\nVersion Control Manage Kubernetes manifests using version control systems like Git to track changes and enable collaboration.\nSecurity Best Practices RBAC (Role-Based Access Control) Control access to Kubernetes resources by defining roles and role bindings.\napiVersion: rbac.authorization.k8s.io/v1 kind: Role metadata: namespace: default name: pod-reader rules: - apiGroups: [\"\"] resources: [\"pods\"] verbs: [\"get\", \"watch\", \"list\"] --- apiVersion: rbac.authorization.k8s.io/v1 kind: RoleBinding metadata: name: read-pods namespace: default subjects: - kind: User name: jane apiGroup: rbac.authorization.k8s.io roleRef: kind: Role name: pod-reader apiGroup: rbac.authorization.k8s.io Network Policies Define how Pods communicate with each other and other network endpoints.\napiVersion: networking.k8s.io/v1 kind: NetworkPolicy metadata: name: allow-same-namespace spec: podSelector: {} ingress: - from: - podSelector: {} Pod Security Policies Enforce security standards for Pods, such as restricting privileged containers.\napiVersion: policy/v1beta1 kind: PodSecurityPolicy metadata: name: restricted spec: privileged: false seLinux: rule: RunAsAny supplementalGroups: rule: RunAsAny runAsUser: rule: MustRunAsNonRoot fsGroup: rule: RunAsAny Image Security Use Trusted Images: Pull images from reputable sources. Scan for Vulnerabilities: Use tools like Trivy or Clair. Avoid Running as Root: Define non-root users in Dockerfiles. Secrets Management Use Kubernetes Secrets to manage sensitive data securely.\napiVersion: v1 kind: Secret metadata: name: db-secret type: Opaque data: username: YWRtaW4= # base64 encoded password: MWYyZDFlMmU2N2Rm Networking Service Types ClusterIP: Default type; accessible only within the cluster. NodePort: Exposes the service on each nodeâ€™s IP at a static port. LoadBalancer: Integrates with cloud provider load balancers. ExternalName: Maps the service to an external DNS name. Ingress Controllers Manage external access to services, typically HTTP.\nPopular Ingress Controllers: NGINX Ingress Controller Traefik HAProxy apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: example-ingress spec: rules: - host: example.com http: paths: - path: / pathType: Prefix backend: service: name: my-service port: number: 80 DNS Management Kubernetes provides internal DNS for service discovery. Ensure proper DNS setup for ClusterDNS.\nService Mesh Implement advanced networking features like traffic management, security, and observability.\nPopular Service Meshes: Istio Linkerd Consul Connect Storage Management Persistent Volumes (PVs) and Persistent Volume Claims (PVCs) Use PVs and PVCs to manage storage resources dynamically.\napiVersion: v1 kind: PersistentVolumeClaim metadata: name: pvc-example spec: accessModes: - ReadWriteOnce resources: requests: storage: 10Gi Storage Classes Define different storage backends and reclaim policies.\napiVersion: storage.k8s.io/v1 kind: StorageClass metadata: name: fast provisioner: kubernetes.io/aws-ebs parameters: type: gp2 Data Backup and Restore Implement backup strategies for persistent data using tools like Velero or Kasten.\nMonitoring and Logging Monitoring Tools Prometheus: Metrics collection and alerting. Grafana: Visualization of metrics. Kube-state-metrics: Kubernetes specific metrics. Logging Solutions ELK Stack (Elasticsearch, Logstash, Kibana) Fluentd Graylog Loki Alerting Set up alerts for critical metrics and events using Alertmanager or integrated tools with Prometheus.\nDeployment Strategies Rolling Updates Gradually replace Pods with new ones to ensure zero downtime.\napiVersion: apps/v1 kind: Deployment metadata: name: rolling-update-deployment spec: replicas: 3 strategy: type: RollingUpdate rollingUpdate: maxUnavailable: 1 maxSurge: 1 selector: matchLabels: app: myapp template: metadata: labels: app: myapp spec: containers: - name: myapp-container image: myapp:v2 Blue/Green Deployments Maintain two environments (blue and green) and switch traffic between them during updates.\nCanary Releases Deploy new versions to a subset of users to monitor performance before a full rollout.\nCI/CD Integration Automated Builds and Deployments Integrate Kubernetes with CI/CD pipelines for automated testing and deployment.\nTools: Jenkins, GitLab CI/CD, GitHub Actions, Argo CD # Example GitHub Actions Workflow name: CI/CD Pipeline on: push: branches: [ main ] jobs: build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v2 - name: Build Docker Image run: docker build -t myapp:${{ github.sha }} . - name: Push to Registry run: docker push myapp:${{ github.sha }} deploy: runs-on: ubuntu-latest needs: build steps: - name: Deploy to Kubernetes uses: appleboy/k8s-action@v1.0.0 with: kubeconfig: ${{ secrets.KUBECONFIG }} args: kubectl set image deployment/myapp-deployment myapp=myapp:${{ github.sha }} GitOps Adopt Git-centric workflows using tools like Argo CD or Flux to manage deployments declaratively.\nTroubleshooting Tips Common Issues Pod Failing to Start: Check events and logs. Service Unreachable: Verify Service and Ingress configurations. Resource Limits Exceeded: Adjust requests and limits. Debugging Tools kubectl: Interact with Kubernetes clusters. kubectl describe pod kubectl logs kubectl exec -it -- /bin/bash k9s: Terminal UI to manage Kubernetes clusters. Lens: Kubernetes IDE for visual management. Examples Sample Deployment YAML apiVersion: apps/v1 kind: Deployment metadata: name: myapp-deployment labels: app: myapp spec: replicas: 3 selector: matchLabels: app: myapp template: metadata: labels: app: myapp spec: containers: - name: myapp-container image: myapp:1.0.0 ports: - containerPort: 80 env: - name: ENVIRONMENT value: \"production\" resources: requests: memory: \"64Mi\" cpu: \"250m\" limits: memory: \"128Mi\" cpu: \"500m\" Sample Service YAML apiVersion: v1 kind: Service metadata: name: myapp-service spec: selector: app: myapp ports: - protocol: TCP port: 80 targetPort: 80 type: LoadBalancer Happy Orchestrating! ðŸš€\n","wordCount":"1266","inLanguage":"en","datePublished":"2024-10-15T00:00:00Z","dateModified":"2024-10-15T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://bleedkagax.github.io/post/5_k8s/"},"publisher":{"@type":"Organization","name":"Kaga Blog","logo":{"@type":"ImageObject","url":"https://bleedkagax.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bleedkagax.github.io/ accesskey=h title="Kaga Blog (Alt + H)">Kaga Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Kubernetes</h1><div class=post-meta><span title='2024-10-15 00:00:00 +0000 UTC'>October 15, 2024</span></div></header><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>Kubernetes (k8s) is an open-source container orchestration platform that automates the deployment, scaling, and management of containerized applications.</p><h2 id=kubernetes-architecture>Kubernetes Architecture<a hidden class=anchor aria-hidden=true href=#kubernetes-architecture>#</a></h2><h3 id=masters>Masters<a hidden class=anchor aria-hidden=true href=#masters>#</a></h3><p>The <strong>master node</strong> manages the Kubernetes cluster. It coordinates all activities, such as scheduling, scaling, and updating applications.</p><ul><li><strong>Components</strong>:<ul><li><strong>API Server</strong>: The front-end of the Kubernetes control plane.</li><li><strong>etcd</strong>: A distributed key-value store for configuration data.</li><li><strong>Controller Manager</strong>: Manages controllers that handle routine tasks.</li><li><strong>Scheduler</strong>: Assigns workloads to nodes based on resource availability and policies.</li></ul></li></ul><h3 id=nodes>Nodes<a hidden class=anchor aria-hidden=true href=#nodes>#</a></h3><p><strong>Worker nodes</strong> run the containerized applications. Each node contains the necessary services to run Pods and communicate with the master node.</p><ul><li><strong>Components</strong>:<ul><li><strong>kubelet</strong>: Ensures containers are running in a Pod.</li><li><strong>kube-proxy</strong>: Manages network routing for Kubernetes services.</li><li><strong>Container Runtime</strong>: Software responsible for running containers (e.g., Docker, containerd).</li></ul></li></ul><h3 id=components>Components<a hidden class=anchor aria-hidden=true href=#components>#</a></h3><p>Understanding the architecture is crucial for effective cluster management and troubleshooting.</p><h2 id=setup-and-installation>Setup and Installation<a hidden class=anchor aria-hidden=true href=#setup-and-installation>#</a></h2><h3 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>#</a></h3><ul><li><strong>Operating System</strong>: Linux distributions are commonly used.</li><li><strong>Hardware Requirements</strong>: Adequate CPU, memory, and storage.</li><li><strong>Networking</strong>: Proper network configuration for node communication.</li></ul><h3 id=installation-methods>Installation Methods<a hidden class=anchor aria-hidden=true href=#installation-methods>#</a></h3><h4 id=minikube>Minikube<a hidden class=anchor aria-hidden=true href=#minikube>#</a></h4><p>Ideal for local development and testing.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Install Minikube</span>
</span></span><span style=display:flex><span>curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
</span></span><span style=display:flex><span>sudo install minikube-linux-amd64 /usr/local/bin/minikube
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Start Minikube</span>
</span></span><span style=display:flex><span>minikube start
</span></span></code></pre></div><h4 id=kubeadm>kubeadm<a hidden class=anchor aria-hidden=true href=#kubeadm>#</a></h4><p>Suitable for setting up production-grade clusters.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Initialize Master Node</span>
</span></span><span style=display:flex><span>sudo kubeadm init --pod-network-cidr<span style=color:#f92672>=</span>10.244.0.0/16
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Set up Kubernetes configuration</span>
</span></span><span style=display:flex><span>mkdir -p $HOME/.kube
</span></span><span style=display:flex><span>sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
</span></span><span style=display:flex><span>sudo chown <span style=color:#66d9ef>$(</span>id -u<span style=color:#66d9ef>)</span>:<span style=color:#66d9ef>$(</span>id -g<span style=color:#66d9ef>)</span> $HOME/.kube/config
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Install a Pod network (e.g., Flannel)</span>
</span></span><span style=display:flex><span>kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
</span></span></code></pre></div><h4 id=managed-kubernetes-services>Managed Kubernetes Services<a hidden class=anchor aria-hidden=true href=#managed-kubernetes-services>#</a></h4><p>Managed services simplify cluster setup and management.</p><ul><li><strong>Options</strong>:<ul><li><strong>Google Kubernetes Engine (GKE)</strong></li><li><strong>Amazon Elastic Kubernetes Service (EKS)</strong></li><li><strong>Azure Kubernetes Service (AKS)</strong></li><li><strong>Alibaba Cloud Container Service</strong></li></ul></li></ul><h2 id=core-concepts>Core Concepts<a hidden class=anchor aria-hidden=true href=#core-concepts>#</a></h2><h3 id=pods>Pods<a hidden class=anchor aria-hidden=true href=#pods>#</a></h3><p>The smallest deployable units in Kubernetes, representing a single instance of a running process.</p><ul><li><strong>Features</strong>:<ul><li>Can contain one or more containers.</li><li>Share storage, network, and specifications.</li></ul></li></ul><h3 id=services>Services<a hidden class=anchor aria-hidden=true href=#services>#</a></h3><p>Define a logical set of Pods and a policy to access them.</p><ul><li><strong>Types</strong>:<ul><li><strong>ClusterIP</strong>: Internal access within the cluster.</li><li><strong>NodePort</strong>: Exposes the service on each nodeâ€™s IP at a static port.</li><li><strong>LoadBalancer</strong>: Exposes the service externally using a cloud providerâ€™s load balancer.</li><li><strong>ExternalName</strong>: Maps a service to a DNS name.</li></ul></li></ul><h3 id=deployments>Deployments<a hidden class=anchor aria-hidden=true href=#deployments>#</a></h3><p>Provide declarative updates for Pods and ReplicaSets.</p><ul><li><strong>Features</strong>:<ul><li>Manage rolling updates and rollbacks.</li><li>Ensure desired state is maintained.</li></ul></li></ul><h3 id=replicasets>ReplicaSets<a hidden class=anchor aria-hidden=true href=#replicasets>#</a></h3><p>Ensure a specified number of Pod replicas are running at any given time.</p><h3 id=namespaces>Namespaces<a hidden class=anchor aria-hidden=true href=#namespaces>#</a></h3><p>Provide a way to divide cluster resources between multiple users.</p><ul><li><strong>Use Cases</strong>:<ul><li>Environment segregation (e.g., dev, staging, production).</li><li>Resource isolation.</li></ul></li></ul><h3 id=configmaps-and-secrets>ConfigMaps and Secrets<a hidden class=anchor aria-hidden=true href=#configmaps-and-secrets>#</a></h3><ul><li><strong>ConfigMaps</strong>: Store non-confidential configuration data.</li><li><strong>Secrets</strong>: Store sensitive information such as passwords and tokens.</li></ul><h2 id=best-practices>Best Practices<a hidden class=anchor aria-hidden=true href=#best-practices>#</a></h2><h3 id=resource-management>Resource Management<a hidden class=anchor aria-hidden=true href=#resource-management>#</a></h3><h4 id=resource-requests-and-limits>Resource Requests and Limits<a hidden class=anchor aria-hidden=true href=#resource-requests-and-limits>#</a></h4><p>Define resource requirements to optimize scheduling and prevent resource contention.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>resources</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>requests</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>memory</span>: <span style=color:#e6db74>&#34;64Mi&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>cpu</span>: <span style=color:#e6db74>&#34;250m&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>limits</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>memory</span>: <span style=color:#e6db74>&#34;128Mi&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>cpu</span>: <span style=color:#e6db74>&#34;500m&#34;</span>
</span></span></code></pre></div><h4 id=auto-scaling>Auto-scaling<a hidden class=anchor aria-hidden=true href=#auto-scaling>#</a></h4><p>Utilize Kubernetesâ€™ auto-scaling features to handle varying workloads.</p><ul><li><p><strong>Horizontal Pod Autoscaler (HPA)</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>autoscaling/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>HorizontalPodAutoscaler</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>hpa-example</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>scaleTargetRef</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>myapp</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>minReplicas</span>: <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>maxReplicas</span>: <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>targetCPUUtilizationPercentage</span>: <span style=color:#ae81ff>80</span>
</span></span></code></pre></div></li><li><p><strong>Vertical Pod Autoscaler (VPA)</strong></p></li><li><p><strong>Cluster Autoscaler</strong></p></li></ul><h3 id=naming-conventions>Naming Conventions<a hidden class=anchor aria-hidden=true href=#naming-conventions>#</a></h3><p>Maintain consistent and descriptive names for resources.</p><ul><li><strong>Format</strong>: <code>&lt;project>-&lt;component>-&lt;environment>-&lt;instance></code></li><li><strong>Example</strong>: <code>webapp-api-prod-1</code></li></ul><h3 id=configuration-management>Configuration Management<a hidden class=anchor aria-hidden=true href=#configuration-management>#</a></h3><p>Store configurations separately using ConfigMaps and Secrets to maintain flexibility and security.</p><h3 id=version-control>Version Control<a hidden class=anchor aria-hidden=true href=#version-control>#</a></h3><p>Manage Kubernetes manifests using version control systems like Git to track changes and enable collaboration.</p><h2 id=security-best-practices>Security Best Practices<a hidden class=anchor aria-hidden=true href=#security-best-practices>#</a></h2><h3 id=rbac-role-based-access-control>RBAC (Role-Based Access Control)<a hidden class=anchor aria-hidden=true href=#rbac-role-based-access-control>#</a></h3><p>Control access to Kubernetes resources by defining roles and role bindings.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>rbac.authorization.k8s.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Role</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>pod-reader</span>
</span></span><span style=display:flex><span><span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>- <span style=color:#f92672>apiGroups</span>: [<span style=color:#e6db74>&#34;&#34;</span>]
</span></span><span style=display:flex><span>  <span style=color:#f92672>resources</span>: [<span style=color:#e6db74>&#34;pods&#34;</span>]
</span></span><span style=display:flex><span>  <span style=color:#f92672>verbs</span>: [<span style=color:#e6db74>&#34;get&#34;</span>, <span style=color:#e6db74>&#34;watch&#34;</span>, <span style=color:#e6db74>&#34;list&#34;</span>]
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>rbac.authorization.k8s.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>RoleBinding</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>read-pods</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span><span style=color:#f92672>subjects</span>:
</span></span><span style=display:flex><span>- <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>User</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>jane</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>apiGroup</span>: <span style=color:#ae81ff>rbac.authorization.k8s.io</span>
</span></span><span style=display:flex><span><span style=color:#f92672>roleRef</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Role</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>pod-reader</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>apiGroup</span>: <span style=color:#ae81ff>rbac.authorization.k8s.io</span>
</span></span></code></pre></div><h3 id=network-policies>Network Policies<a hidden class=anchor aria-hidden=true href=#network-policies>#</a></h3><p>Define how Pods communicate with each other and other network endpoints.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>networking.k8s.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>NetworkPolicy</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>allow-same-namespace</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>podSelector</span>: {}
</span></span><span style=display:flex><span>  <span style=color:#f92672>ingress</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>from</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>podSelector</span>: {}
</span></span></code></pre></div><h3 id=pod-security-policies>Pod Security Policies<a hidden class=anchor aria-hidden=true href=#pod-security-policies>#</a></h3><p>Enforce security standards for Pods, such as restricting privileged containers.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>policy/v1beta1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>PodSecurityPolicy</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>restricted</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>privileged</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>seLinux</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>rule</span>: <span style=color:#ae81ff>RunAsAny</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>supplementalGroups</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>rule</span>: <span style=color:#ae81ff>RunAsAny</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runAsUser</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>rule</span>: <span style=color:#ae81ff>MustRunAsNonRoot</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>fsGroup</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>rule</span>: <span style=color:#ae81ff>RunAsAny</span>
</span></span></code></pre></div><h3 id=image-security>Image Security<a hidden class=anchor aria-hidden=true href=#image-security>#</a></h3><ul><li><strong>Use Trusted Images</strong>: Pull images from reputable sources.</li><li><strong>Scan for Vulnerabilities</strong>: Use tools like <strong>Trivy</strong> or <strong>Clair</strong>.</li><li><strong>Avoid Running as Root</strong>: Define non-root users in Dockerfiles.</li></ul><h3 id=secrets-management>Secrets Management<a hidden class=anchor aria-hidden=true href=#secrets-management>#</a></h3><p>Use Kubernetes Secrets to manage sensitive data securely.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Secret</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>db-secret</span>
</span></span><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>Opaque</span>
</span></span><span style=display:flex><span><span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>username</span>: <span style=color:#ae81ff>YWRtaW4= </span> <span style=color:#75715e># base64 encoded</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>password</span>: <span style=color:#ae81ff>MWYyZDFlMmU2N2Rm</span>
</span></span></code></pre></div><h2 id=networking>Networking<a hidden class=anchor aria-hidden=true href=#networking>#</a></h2><h3 id=service-types>Service Types<a hidden class=anchor aria-hidden=true href=#service-types>#</a></h3><ul><li><strong>ClusterIP</strong>: Default type; accessible only within the cluster.</li><li><strong>NodePort</strong>: Exposes the service on each nodeâ€™s IP at a static port.</li><li><strong>LoadBalancer</strong>: Integrates with cloud provider load balancers.</li><li><strong>ExternalName</strong>: Maps the service to an external DNS name.</li></ul><h3 id=ingress-controllers>Ingress Controllers<a hidden class=anchor aria-hidden=true href=#ingress-controllers>#</a></h3><p>Manage external access to services, typically HTTP.</p><ul><li><strong>Popular Ingress Controllers</strong>:<ul><li><strong>NGINX Ingress Controller</strong></li><li><strong>Traefik</strong></li><li><strong>HAProxy</strong></li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>networking.k8s.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Ingress</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>example-ingress</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>host</span>: <span style=color:#ae81ff>example.com</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>http</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>pathType</span>: <span style=color:#ae81ff>Prefix</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>backend</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>service</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>name</span>: <span style=color:#ae81ff>my-service</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>port</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>number</span>: <span style=color:#ae81ff>80</span>
</span></span></code></pre></div><h3 id=dns-management>DNS Management<a hidden class=anchor aria-hidden=true href=#dns-management>#</a></h3><p>Kubernetes provides internal DNS for service discovery. Ensure proper DNS setup for ClusterDNS.</p><h3 id=service-mesh>Service Mesh<a hidden class=anchor aria-hidden=true href=#service-mesh>#</a></h3><p>Implement advanced networking features like traffic management, security, and observability.</p><ul><li><strong>Popular Service Meshes</strong>:<ul><li><strong>Istio</strong></li><li><strong>Linkerd</strong></li><li><strong>Consul Connect</strong></li></ul></li></ul><h2 id=storage-management>Storage Management<a hidden class=anchor aria-hidden=true href=#storage-management>#</a></h2><h3 id=persistent-volumes-pvs-and-persistent-volume-claims-pvcs>Persistent Volumes (PVs) and Persistent Volume Claims (PVCs)<a hidden class=anchor aria-hidden=true href=#persistent-volumes-pvs-and-persistent-volume-claims-pvcs>#</a></h3><p>Use PVs and PVCs to manage storage resources dynamically.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>PersistentVolumeClaim</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>pvc-example</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>accessModes</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>ReadWriteOnce</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>resources</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>requests</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>storage</span>: <span style=color:#ae81ff>10Gi</span>
</span></span></code></pre></div><h3 id=storage-classes>Storage Classes<a hidden class=anchor aria-hidden=true href=#storage-classes>#</a></h3><p>Define different storage backends and reclaim policies.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>storage.k8s.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>StorageClass</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>fast</span>
</span></span><span style=display:flex><span><span style=color:#f92672>provisioner</span>: <span style=color:#ae81ff>kubernetes.io/aws-ebs</span>
</span></span><span style=display:flex><span><span style=color:#f92672>parameters</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>gp2</span>
</span></span></code></pre></div><h3 id=data-backup-and-restore>Data Backup and Restore<a hidden class=anchor aria-hidden=true href=#data-backup-and-restore>#</a></h3><p>Implement backup strategies for persistent data using tools like <strong>Velero</strong> or <strong>Kasten</strong>.</p><h2 id=monitoring-and-logging>Monitoring and Logging<a hidden class=anchor aria-hidden=true href=#monitoring-and-logging>#</a></h2><h3 id=monitoring-tools>Monitoring Tools<a hidden class=anchor aria-hidden=true href=#monitoring-tools>#</a></h3><ul><li><strong>Prometheus</strong>: Metrics collection and alerting.</li><li><strong>Grafana</strong>: Visualization of metrics.</li><li><strong>Kube-state-metrics</strong>: Kubernetes specific metrics.</li></ul><h3 id=logging-solutions>Logging Solutions<a hidden class=anchor aria-hidden=true href=#logging-solutions>#</a></h3><ul><li><strong>ELK Stack (Elasticsearch, Logstash, Kibana)</strong></li><li><strong>Fluentd</strong></li><li><strong>Graylog</strong></li><li><strong>Loki</strong></li></ul><h3 id=alerting>Alerting<a hidden class=anchor aria-hidden=true href=#alerting>#</a></h3><p>Set up alerts for critical metrics and events using <strong>Alertmanager</strong> or integrated tools with Prometheus.</p><h2 id=deployment-strategies>Deployment Strategies<a hidden class=anchor aria-hidden=true href=#deployment-strategies>#</a></h2><h3 id=rolling-updates>Rolling Updates<a hidden class=anchor aria-hidden=true href=#rolling-updates>#</a></h3><p>Gradually replace Pods with new ones to ensure zero downtime.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>rolling-update-deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>strategy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>RollingUpdate</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>rollingUpdate</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>maxUnavailable</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>maxSurge</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>app</span>: <span style=color:#ae81ff>myapp</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>app</span>: <span style=color:#ae81ff>myapp</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>myapp-container</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>myapp:v2</span>
</span></span></code></pre></div><h3 id=bluegreen-deployments>Blue/Green Deployments<a hidden class=anchor aria-hidden=true href=#bluegreen-deployments>#</a></h3><p>Maintain two environments (blue and green) and switch traffic between them during updates.</p><h3 id=canary-releases>Canary Releases<a hidden class=anchor aria-hidden=true href=#canary-releases>#</a></h3><p>Deploy new versions to a subset of users to monitor performance before a full rollout.</p><h2 id=cicd-integration>CI/CD Integration<a hidden class=anchor aria-hidden=true href=#cicd-integration>#</a></h2><h3 id=automated-builds-and-deployments>Automated Builds and Deployments<a hidden class=anchor aria-hidden=true href=#automated-builds-and-deployments>#</a></h3><p>Integrate Kubernetes with CI/CD pipelines for automated testing and deployment.</p><ul><li><strong>Tools</strong>: <strong>Jenkins</strong>, <strong>GitLab CI/CD</strong>, <strong>GitHub Actions</strong>, <strong>Argo CD</strong></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># Example GitHub Actions Workflow</span>
</span></span><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>CI/CD Pipeline</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>: [ <span style=color:#ae81ff>main ]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build Docker Image</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: <span style=color:#ae81ff>docker build -t myapp:${{ github.sha }} .</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Push to Registry</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: <span style=color:#ae81ff>docker push myapp:${{ github.sha }}</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>needs</span>: <span style=color:#ae81ff>build</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy to Kubernetes</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>appleboy/k8s-action@v1.0.0</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>kubeconfig</span>: <span style=color:#ae81ff>${{ secrets.KUBECONFIG }}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>args</span>: <span style=color:#ae81ff>kubectl set image deployment/myapp-deployment myapp=myapp:${{ github.sha }}</span>
</span></span></code></pre></div><h3 id=gitops>GitOps<a hidden class=anchor aria-hidden=true href=#gitops>#</a></h3><p>Adopt Git-centric workflows using tools like <strong>Argo CD</strong> or <strong>Flux</strong> to manage deployments declaratively.</p><h2 id=troubleshooting-tips>Troubleshooting Tips<a hidden class=anchor aria-hidden=true href=#troubleshooting-tips>#</a></h2><h3 id=common-issues>Common Issues<a hidden class=anchor aria-hidden=true href=#common-issues>#</a></h3><ul><li><strong>Pod Failing to Start</strong>: Check events and logs.</li><li><strong>Service Unreachable</strong>: Verify Service and Ingress configurations.</li><li><strong>Resource Limits Exceeded</strong>: Adjust requests and limits.</li></ul><h3 id=debugging-tools>Debugging Tools<a hidden class=anchor aria-hidden=true href=#debugging-tools>#</a></h3><ul><li><strong>kubectl</strong>: Interact with Kubernetes clusters.<ul><li><code>kubectl describe pod &lt;pod-name></code></li><li><code>kubectl logs &lt;pod-name></code></li><li><code>kubectl exec -it &lt;pod-name> -- /bin/bash</code></li></ul></li><li><strong>k9s</strong>: Terminal UI to manage Kubernetes clusters.</li><li><strong>Lens</strong>: Kubernetes IDE for visual management.</li></ul><h2 id=examples>Examples<a hidden class=anchor aria-hidden=true href=#examples>#</a></h2><h3 id=sample-deployment-yaml>Sample Deployment YAML<a hidden class=anchor aria-hidden=true href=#sample-deployment-yaml>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>myapp-deployment</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>app</span>: <span style=color:#ae81ff>myapp</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>app</span>: <span style=color:#ae81ff>myapp</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>app</span>: <span style=color:#ae81ff>myapp</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>myapp-container</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>myapp:1.0.0</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>containerPort</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ENVIRONMENT</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>value</span>: <span style=color:#e6db74>&#34;production&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>resources</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>requests</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>memory</span>: <span style=color:#e6db74>&#34;64Mi&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>cpu</span>: <span style=color:#e6db74>&#34;250m&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>limits</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>memory</span>: <span style=color:#e6db74>&#34;128Mi&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>cpu</span>: <span style=color:#e6db74>&#34;500m&#34;</span>
</span></span></code></pre></div><h3 id=sample-service-yaml>Sample Service YAML<a hidden class=anchor aria-hidden=true href=#sample-service-yaml>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Service</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>myapp-service</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>app</span>: <span style=color:#ae81ff>myapp</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>protocol</span>: <span style=color:#ae81ff>TCP</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>port</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>targetPort</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>LoadBalancer</span>
</span></span></code></pre></div><p><strong>Happy Orchestrating!</strong> ðŸš€</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://bleedkagax.github.io/tags/systemdesign/>SystemDesign</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://bleedkagax.github.io/>Kaga Blog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script type=module>
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true });
</script><script>(function(){var e=document.querySelectorAll("pre > code.language-mermaid");e.forEach(function(e){var t,n=e.parentElement;if(!n)return;t=document.createElement("div"),t.className="mermaid",t.textContent=e.textContent||"",n.replaceWith(t)})})()</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>