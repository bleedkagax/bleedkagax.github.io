<!doctype html><html class="not-ready lg:text-base" style=--bg:#faf8f1 lang=en-us dir=ltr><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Network Interview - Kaga Blog</title>
<meta name=theme-color><meta name=description content="What is the OSI model?


Physical Layer
Data Link Layer
Network Layer
Transport Layer
Session Layer
Presentation Layer
Application Layer

Explain the difference between TCP and UDP.


TCP (Transmission Control Protocol):

Connection-oriented
Reliable, ensures all data is received
Flow control and congestion control
Slower than UDP
Used for applications requiring high reliability (e.g., file transfer, email)



UDP (User Datagram Protocol):"><meta name=author content="Kaga Blog"><link rel="preload stylesheet" as=style href=https://bleedkagax.github.io/main.min.css><link rel=preload as=image href=https://bleedkagax.github.io/theme.png><script defer src=https://bleedkagax.github.io/highlight.min.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://bleedkagax.github.io/favicon.ico><link rel=apple-touch-icon href=https://bleedkagax.github.io/apple-touch-icon.png><meta name=generator content="Hugo 0.134.0"><meta itemprop=name content="Network Interview"><meta itemprop=description content="What is the OSI model? Physical Layer Data Link Layer Network Layer Transport Layer Session Layer Presentation Layer Application Layer Explain the difference between TCP and UDP. TCP (Transmission Control Protocol):
Connection-oriented Reliable, ensures all data is received Flow control and congestion control Slower than UDP Used for applications requiring high reliability (e.g., file transfer, email) UDP (User Datagram Protocol):"><meta itemprop=datePublished content="2024-10-04T00:00:00+00:00"><meta itemprop=dateModified content="2024-10-04T00:00:00+00:00"><meta itemprop=wordCount content="1308"><meta itemprop=keywords content="Network"><meta property="og:url" content="https://bleedkagax.github.io/post/0_network_interview/"><meta property="og:site_name" content="Kaga Blog"><meta property="og:title" content="Network Interview"><meta property="og:description" content="What is the OSI model? Physical Layer Data Link Layer Network Layer Transport Layer Session Layer Presentation Layer Application Layer Explain the difference between TCP and UDP. TCP (Transmission Control Protocol):
Connection-oriented Reliable, ensures all data is received Flow control and congestion control Slower than UDP Used for applications requiring high reliability (e.g., file transfer, email) UDP (User Datagram Protocol):"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-10-04T00:00:00+00:00"><meta property="article:modified_time" content="2024-10-04T00:00:00+00:00"><meta property="article:tag" content="Network"><meta name=twitter:card content="summary"><meta name=twitter:title content="Network Interview"><meta name=twitter:description content="What is the OSI model? Physical Layer Data Link Layer Network Layer Transport Layer Session Layer Presentation Layer Application Layer Explain the difference between TCP and UDP. TCP (Transmission Control Protocol):
Connection-oriented Reliable, ensures all data is received Flow control and congestion control Slower than UDP Used for applications requiring high reliability (e.g., file transfer, email) UDP (User Datagram Protocol):"><link rel=canonical href=https://bleedkagax.github.io/post/0_network_interview/></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[4.5rem] max-w-[--w] px-8 lg:justify-center"><div class="relative z-50 ltr:mr-auto rtl:ml-auto flex items-center"><a class="-translate-y-[1px] text-2xl font-medium" href=https://bleedkagax.github.io/>Kaga Blog</a><div class="btn-dark text-[0] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 ltr:-mr-8 rtl:-ml-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg="#faf8f1".replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-[--w] px-8 pb-16 pt-14 dark:prose-invert"><article><header class=mb-14><h1 class="!my-0 pb-2.5">Network Interview</h1><div class="text-xs antialiased opacity-60"><time>Oct 4, 2024</time></div></header><section><h2 id=what-is-the-osi-model>What is the OSI model?</h2><p><img src=/img/0_network_interview.png alt></p><ol><li>Physical Layer</li><li>Data Link Layer</li><li>Network Layer</li><li>Transport Layer</li><li>Session Layer</li><li>Presentation Layer</li><li>Application Layer</li></ol><h2 id=explain-the-difference-between-tcp-and-udp>Explain the difference between TCP and UDP.</h2><ul><li><p>TCP (Transmission Control Protocol):</p><ul><li>Connection-oriented</li><li>Reliable, ensures all data is received</li><li>Flow control and congestion control</li><li>Slower than UDP</li><li>Used for applications requiring high reliability (e.g., file transfer, email)</li></ul></li><li><p>UDP (User Datagram Protocol):</p><ul><li>Connectionless</li><li>Unreliable, doesn&rsquo;t guarantee data delivery</li><li>No flow control or congestion control</li><li>Faster than TCP</li><li>Used for applications that prioritize speed (e.g., video streaming, online gaming)</li></ul></li></ul><h2 id=what-is-dns-and-how-does-it-work>What is DNS and how does it work?</h2><p>DNS (Domain Name System) is a hierarchical and decentralized naming system for computers, services, or other resources connected to the Internet or a private network. It translates human-readable domain names (e.g., <a href=https://www.example.com>www.example.com</a>) into IP addresses.</p><p>Process:</p><ol><li>User enters a URL in the browser</li><li>Browser checks its cache for DNS record</li><li>If not found, it queries the OS</li><li>If still not found, it contacts a DNS resolver</li><li>The resolver queries root servers, then TLD servers, then authoritative name servers</li><li>The IP address is returned to the browser</li></ol><p><img src=/img/0_network_interview-1.png alt></p><h2 id=what-is-a-subnet-and-subnet-mask>What is a subnet and subnet mask?</h2><p>A subnet is a logical subdivision of an IP network. A subnet mask is a 32-bit number that masks an IP address, and divides the IP address into network address and host address.</p><p>Subnetting allows for more efficient use of IP addresses and improved network performance.</p><p><img src=/img/0_network_interview-2.png alt></p><h2 id=explain-the-concept-of-arp-address-resolution-protocol>Explain the concept of ARP (Address Resolution Protocol).</h2><p>ARP is a protocol used to map an IP address to a physical machine address (MAC address) in a local network.</p><p>Process:</p><ol><li>Device wants to send a packet to an IP address</li><li>It checks its ARP cache for the corresponding MAC address</li><li>If not found, it broadcasts an ARP request</li><li>The device with the matching IP address responds with its MAC address</li><li>The sender updates its ARP cache and sends the packet</li></ol><h2 id=what-is-the-difference-between-a-hub-switch-and-router>What is the difference between a hub, switch, and router?</h2><ul><li>Hub: Layer 1 device, broadcasts data to all ports</li><li>Switch: Layer 2 device, forwards data to specific port based on MAC address</li><li>Router: Layer 3 device, forwards data between different networks based on IP address</li></ul><h2 id=explain-the-three-way-handshake-in-tcp>Explain the three-way handshake in TCP.</h2><p>The three-way handshake is used to establish a TCP connection:</p><ol><li>SYN: Client sends a SYN packet to the server</li><li>SYN-ACK: Server responds with a SYN-ACK packet</li><li>ACK: Client sends an ACK packet to the server</li></ol><p><img src=/img/0_network_interview-3.png alt></p><h2 id=what-is-dhcp-and-what-is-it-used-for>What is DHCP and what is it used for?</h2><p>DHCP (Dynamic Host Configuration Protocol) is a network management protocol used to dynamically assign an IP address to any device, or node, on a network so it can communicate using IP.</p><p>DHCP automates and centrally manages these configurations rather than requiring network administrators to manually assign IP addresses to all network devices.</p><p><img src=/img/0_network_interview-4.png alt></p><ol><li><strong>DHCP Discover:</strong> The client broadcasts a request for an IP address.</li><li><strong>DHCP Offer:</strong> The DHCP server responds with an IP address offer.</li><li><strong>DHCP Request:</strong> The client requests the offered IP address.</li><li><strong>DHCP Acknowledge:</strong> The server confirms the IP address assignment.</li></ol><h2 id=explain-the-difference-between-ipv4-and-ipv6>Explain the difference between IPv4 and IPv6.</h2><table><thead><tr><th style=text-align:left>Feature</th><th style=text-align:left>IPv4</th><th style=text-align:left>IPv6</th></tr></thead><tbody><tr><td style=text-align:left>Address Length</td><td style=text-align:left>32-bit</td><td style=text-align:left>128-bit</td></tr><tr><td style=text-align:left>Address Space</td><td style=text-align:left>~4.3 billion unique addresses</td><td style=text-align:left>340 undecillion (3.4 × 10^38) addresses</td></tr><tr><td style=text-align:left>Notation</td><td style=text-align:left>Dot-decimal</td><td style=text-align:left>Hexadecimal with colons</td></tr><tr><td style=text-align:left>Example</td><td style=text-align:left><code>192.168.1.1</code></td><td style=text-align:left><code>2001:0db8:85a3:0000:0000:8a2e:0370:7334</code></td></tr></tbody></table><h2 id=what-is-nat-and-why-is-it-used>What is NAT and why is it used?</h2><p>NAT (Network Address Translation) is a method of remapping one IP address space into another by modifying network address information in the IP header of packets while they are in transit across a traffic routing device.</p><p>NAT is primarily used to:</p><ul><li>Conserve IPv4 addresses</li><li>Improve security by hiding internal network addresses</li></ul><h2 id=can-multiple-udp-sockets-bind-to-the-same-ip-and-port>Can multiple UDP sockets bind to the same IP and port?</h2><ul><li><strong>Yes</strong>, with conditions:<ul><li>Most operating systems allow multiple UDP sockets to bind to the same IP and port.</li><li>This is often referred to as &ldquo;socket reuse&rdquo; or &ldquo;address reuse&rdquo;.</li><li>Requires setting the <code>SO_REUSEADDR</code> socket option before binding.</li></ul></li></ul><h2 id=can-multiple-tcp-sockets-bind-to-the-same-ip-and-port>Can multiple TCP sockets bind to the same IP and port?</h2><ul><li><strong>Generally No</strong>, with exceptions:<ul><li>Typically, only one TCP socket can bind to a specific IP and port combination.</li><li>Exceptions:<ul><li>Different IP addresses on the same port.</li><li>Same IP, different ports.</li><li>Using <code>SO_REUSEADDR</code> for sequential (not simultaneous) bindings.</li></ul></li></ul></li></ul><h2 id=can-tcp-and-udp-bind-to-the-same-port>Can TCP and UDP bind to the same port?</h2><ul><li><strong>Yes</strong>:<ul><li>TCP and UDP use separate protocol stacks.</li><li>A TCP socket and a UDP socket can bind to the same port number simultaneously.</li><li>The operating system distinguishes between them based on the protocol.</li></ul></li></ul><h2 id=how-tcp-ensures-reliable-transmission>How TCP Ensures Reliable Transmission</h2><ol><li><p><strong>Sequence Numbers and Acknowledgments</strong></p><ul><li>Each byte of data is assigned a sequence number</li><li>Receiver acknowledges receipt of data by sending ACKs</li></ul></li><li><p><strong>Retransmission</strong></p><ul><li>Sender retransmits data if ACK is not received within a timeout period</li><li>Implements various retransmission strategies (e.g., fast retransmit)</li></ul></li><li><p><strong>Checksums</strong></p><ul><li>Used to detect corrupted data</li><li>Receiver discards corrupt segments and doesn&rsquo;t acknowledge them</li></ul></li><li><p><strong>Flow Control</strong></p><ul><li>Sliding window protocol</li><li>Prevents sender from overwhelming receiver</li></ul></li><li><p><strong>Congestion Control</strong></p><ul><li>Slow start</li><li>Congestion avoidance</li><li>Fast recovery</li></ul></li><li><p><strong>Connection Management</strong></p><ul><li>Three-way handshake for connection establishment</li><li>Four-way handshake for connection termination</li></ul></li><li><p><strong>Ordered Data Transfer</strong></p><ul><li>Segments are reassembled in correct order at the receiver</li></ul></li><li><p><strong>Duplicate Data Detection</strong></p><ul><li>Receiver identifies and discards duplicate segments</li></ul></li></ol><h2 id=what-is-the-tcp-four-way-handshake-for-connection-termination>What is the TCP four-way handshake for connection termination?</h2><ol><li>FIN from initiator: Either the client or server can initiate the termination by sending a FIN (finish) packet.</li><li>ACK from receiver: The receiving end acknowledges the FIN with an ACK packet.</li><li>FIN from receiver: The receiving end then sends its own FIN packet to indicate it&rsquo;s ready to close.</li><li>ACK from initiator: The initiating end acknowledges this FIN with a final ACK.</li></ol><h2 id=tcp-time-wait>TCP TIME-WAIT</h2><p>After a connection is closed, the closing party enters a TIME-WAIT state. This state typically lasts for 2 * Maximum Segment Lifetime (MSL), usually around 2-4 minutes. The TIME-WAIT state serves two main purposes:</p><ul><li>Ensures that any delayed packets from the closed connection are handled properly and don&rsquo;t interfere with new connections.</li><li>Allows for proper closure of both sides of the connection, preventing potential issues with subsequent connections.</li></ul><h2 id=how-to-implement-a-basic-tcp-like-protocol-using-udp>How to implement a basic TCP-like protocol using UDP？</h2><ol><li><p>Connection Establishment
Implement a three-way handshake similar to TCP</p></li><li><p>Sequence Numbers
Assign sequence numbers to each packet
Use these to detect packet loss and ensure correct ordering</p></li><li><p>Acknowledgments
Receiver sends acknowledgments for received packets
Sender retransmits packets that aren&rsquo;t acknowledged within a timeout period</p></li><li><p>Flow Control
Implement a simple sliding window protocol
Receiver advertises available buffer space</p></li><li><p>Error Detection
Use checksums or CRC to detect corrupted packets
Discard or request retransmission of corrupted packets</p></li><li><p>Connection Termination
Implement a four-way handshake for connection termination</p></li></ol><h2 id=http-keep-alive>Http Keep-Alive</h2><p>In this example, the idle timeout is set to ten seconds and it can accept up to 100 HTTP requests before the HTTP Connection is forcibly closed.</p><p><em>Response</em></p><pre tabindex=0><code>HTTP/1.1 200 OK
Connection: keep-alive
Content-Type: text/html; chartset=utf-8
Keep-Alive: timeout=10, max=100
</code></pre><h2 id=session-id-and-session-key>Session ID and Session Key</h2><table><thead><tr><th style=text-align:left>Aspect</th><th style=text-align:left><strong>Session ID</strong></th><th style=text-align:left><strong>Session Key</strong></th></tr></thead><tbody><tr><td style=text-align:left><strong>Purpose</strong></td><td style=text-align:left>Uniquely identifies a session between client and server.</td><td style=text-align:left>Secures communication or encrypts session data.</td></tr><tr><td style=text-align:left><strong>Type</strong></td><td style=text-align:left>A random string or token.</td><td style=text-align:left>A cryptographic key.</td></tr><tr><td style=text-align:left><strong>Use Case</strong></td><td style=text-align:left>Used to look up session data on the server.</td><td style=text-align:left>Used to encrypt/decrypt data during a session.</td></tr><tr><td style=text-align:left><strong>Storage</strong></td><td style=text-align:left>Stored in cookies (client) and server memory.</td><td style=text-align:left>Stored in memory (for encryption) or negotiated during SSL/TLS.</td></tr><tr><td style=text-align:left><strong>Sensitive Info</strong></td><td style=text-align:left>Does not contain sensitive info (just an ID).</td><td style=text-align:left>Contains sensitive info (used for encryption).</td></tr><tr><td style=text-align:left><strong>Security Role</strong></td><td style=text-align:left>Identifies the user&rsquo;s session, but doesn&rsquo;t secure data directly.</td><td style=text-align:left>Ensures data confidentiality and integrity.</td></tr></tbody></table><h2 id=tp99-tp95-tp90>Tp99 Tp95 Tp90</h2><p>It represents the value below which 95% of the observations in a dataset fall.</p><ol><li><p><strong>Sort the Data</strong>: Arrange all data points in ascending order.</p></li><li><p><strong>Calculate the Index</strong>: Use the formula: <code>index = (n * 0.95) + 0.5</code>, where <code>n</code> is the number of data points.</p><ul><li>If the result is not a whole number, round up to the nearest integer.</li></ul></li><li><p><strong>Find the Value</strong>: The TP95 is the value at the calculated index position in the sorted dataset.</p></li></ol><h2 id=tcp-alive>Tcp Alive</h2><p>fuck byte
短视频去重
bloom过滤器 原理 ，redis 中怎么支持
rocksDB 如何保证快速读写
简历一致性哈希</p></section><footer class="mt-12 flex flex-wrap"><a class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]" href=https://bleedkagax.github.io/tags/network>Network</a></footer><nav class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg !leading-[1.2] *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]"><a class="ltr:pr-3 rtl:pl-3" href=https://bleedkagax.github.io/post/2_go_listenandserve/><span class="ltr:mr-1.5 rtl:ml-1.5">←</span><span>Go's `http.ListenAndServe`</span></a>
<a class="ltr:ml-auto rtl:mr-auto justify-end pl-3" href=https://bleedkagax.github.io/post/1_network_protocols/><span>Network Protocols</span><span class="ltr:ml-1.5 rtl:mr-1.5">→</span></a></nav><script type=module>
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true });
</script><script>Array.from(document.getElementsByClassName("language-mermaid")).forEach(e=>{e.parentElement.outerHTML=`<div class="mermaid [&_svg]:block [&_svg]:m-auto">${e.innerHTML}</div>`})</script></article></main><footer class="mx-auto flex h-[4.5rem] max-w-[--w] items-center px-8 text-xs uppercase tracking-wider opacity-60"><div class=mr-auto>&copy; 2025
<a class=link href=https://bleedkagax.github.io/>Kaga Blog</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>powered by hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>hugo-paper</a></footer></body></html>